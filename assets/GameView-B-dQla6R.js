import{_ as B}from"./PageName.vue_vue_type_script_setup_true_lang-DbTsu5M_.js";import{d as V,u as C,r as i,l as A,m as D,i as T,p as N,q as u,s as R,c as $,o as z,a as E,b as n,n as F,g as I,t as w,x as M,y as Y,z as G,_ as P}from"./index-UQqryMFw.js";const U={class:"game"},W={class:"buttons"},q=["disabled"],H=["disabled"],j=V({__name:"GameView",setup(J){const f=A(),e=C(),r=i(!1),c=i(!1),m=i(!1),t=i(0);let d=f.currentRoute.value.name==="test",a,g=0;const v=i(D((e.currentUser?.blocks.length||0)+1,d?10:e.settings.totalTrials,e.settings.targetPercent)),o=T(()=>v.value[t.value]),p=T(()=>c.value&&o.value?.response==="No"&&!r.value);function b(){t.value++,S()}function S(){if(t.value>=v.value.length){y();return}c.value=!0,m.value=!0,g=Date.now(),a=u(()=>{m.value=!1,a=u(()=>{o.value?.response==="Yes"||t.value<2?b():_("MISS")},e.settings.isiTime)},e.settings.stimulusTime)}function y(){c.value=!1,e.gameFinished(),a=u(()=>f.replace({name:"home"}),1e3)}function _(l){if(!p.value||t.value<2||!o.value)return;const s=o.value;if(s.datetime=Y(),l==="MISS")return h();s.response="Yes",s.RT=Date.now()-g,s.correctness=s.target===l?"Correct":"False Alarm",s.correctness==="False Alarm"&&h()}const k=N("/assets/error.mp3");function h(){e.settings.fbAudio&&k(),e.settings.fbHaptic&&G(200,e.settings.fbAudio?500:0);const l=e.settings.fbVisual;a?.clear(),r.value=l,a=u(()=>{r.value=!1,b()},l?2e3:1e3)}return a=u(()=>{d=f.currentRoute.value.name==="test",S()},1e3),R(()=>{a?.clear(),d||e.addBlock(v.value)}),(l,s)=>(z(),$("div",U,[E(B,{title:"",style:{margin:"0"}}),n("div",{class:"number",style:M({opacity:c.value?1:.5})},[n("div",{class:F(["error",{show:r.value&&I(e).settings.fbVisual}])},w(o.value?.response==="Yes"?"اشتباه بود":"انتخاب نکردی"),3),n("span",null,w(m.value&&!r.value?v.value[t.value]?.stimulus||"":"+"),1)],4),n("div",W,[n("div",{onClick:s[0]||(s[0]=x=>_(!1)),class:"bt no",disabled:!p.value||t.value<2},null,8,q),n("div",{onClick:s[1]||(s[1]=x=>_(!0)),class:"bt yes",disabled:!p.value||t.value<2},null,8,H)])]))}}),O=P(j,[["__scopeId","data-v-6692790f"]]);export{O as default};
